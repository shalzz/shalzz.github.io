<!doctype html><html lang=en><head><meta charset=utf-8><meta content="IE=edge,chrome=1" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1" name=viewport><meta content="interest-cohort=()" http-equiv=Permissions-Policy><title>
  Continuous Marketing - Exploiting Insecure REST API's
</title><meta content="After I finished refactoring my android app to use a 3rd-party public API for the
user data,
I needed a way to quickly promote my application to users.
The API I used is inherently insecure with virtually no standard REST API security
in place and designed with a top-down approach to suit their own mobile app.
Their whole premise being to secure the mobile app with 2FA and having an API
that’s quite literally a bunch of wrapper functions around database queries
exposed as endpoints." name=description><meta content="api, marketing, rest api, python, sendgrid, sendgrid API, sendgrid python, programmatic, continuous, continuous marketing, exploit, insecure api, email, email promotion, marketing campaign, email campaign, automation, marketing automation" name=keywords><meta content="Shaleen Jain" name=author><link href=https://twitter.com/shalzzj rel=author><link href=https://shaleenjain.com/blog/continuous-marketing/ rel=canonical><link href=https://shaleenjain.com/atom.xml rel=alternate title=RSS type=application/atom+xml><meta content=@shalzzj name=twitter:site><meta content=@shalzzj name=twitter:creator><meta content=article property=og:type><meta content=https://shaleenjain.com/blog/continuous-marketing/ property=og:url><meta content="After I finished refactoring my android app to use a 3rd-party public API for the
user data,
I needed a way to quickly promote my application to users.
The API I used is inherently insecure with virtually no standard REST API security
in place and designed with a top-down approach to suit their own mobile app.
Their whole premise being to secure the mobile app with 2FA and having an API
that’s quite literally a bunch of wrapper functions around database queries
exposed as endpoints." property=og:description><meta content="Continuous Marketing - Exploiting Insecure REST API's" name=twitter:title><meta content="Continuous Marketing - Exploiting Insecure REST API's" property=og:title><link href=/icons/apple-touch-icon.png rel=apple-touch-icon sizes=180x180><link href=/icons/favicon-32x32.png rel=icon sizes=32x32 type=image/png><link href=/icons/favicon-16x16.png rel=icon sizes=16x16 type=image/png><link href=/icons/manifest.json rel=manifest><link href=/icons/safari-pinned-tab.svg rel=mask-icon><link rel="shortcut icon" href=/icons/favicon.ico><meta content=/icons/browserconfig.xml name=msapplication-config><meta content=#ffffff name=theme-color><style>/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */
html{-webkit-text-size-adjust:100%;line-height:1.15}body{margin:0}main{display:block}h1{margin:.67em 0;font-size:2em}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace;font-size:1em}a{background-color:#0000}abbr[title]{border-bottom:none;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace;font-size:1em}small{font-size:80%}sub,sup{vertical-align:baseline;font-size:75%;line-height:0;position:relative}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}button,input,optgroup,select,textarea{margin:0;font-family:inherit;font-size:100%;line-height:1.15}button,input{overflow:visible}button,select{text-transform:none}button,[type=button],[type=reset],[type=submit]{-webkit-appearance:button}button::-moz-focus-inner,[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner{border-style:none;padding:0}button:-moz-focusring,[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring{outline:1px dotted buttontext}fieldset{padding:.35em .75em .625em}legend{box-sizing:border-box;color:inherit;white-space:normal;max-width:100%;padding:0;display:table}progress{vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details{display:block}summary{display:list-item}template,[hidden]{display:none}html{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}*,:before,:after{box-sizing:inherit}.image-row{flex-flow:wrap;align-items:center;padding:0 4px;display:flex}.image-column{border-radius:8px;flex:50%;width:100%;max-width:50%;height:auto;padding:0 4px}@media screen and (width<=42em){.image-column{flex:100%;max-width:100%}}.text-center{text-align:center}.text-right{text-align:right}.fa-social-icons{margin-top:-1rem;font-size:2rem}.fa-social-icons a{border:0;margin-right:.1rem}.fa-social-icons a:last-child{margin-right:0}.masthead,.content,.footer{max-width:42em;margin-left:auto;margin-right:auto}.masthead:after,.post:after,.related:after,.recent:after,.page:after,.comments:after,.index:after{content:"";background-color:#c4c4c4;width:150px;height:1px;margin:2rem auto;display:block}.related .related-title,.related .recent-title,.recent .related-title,.recent .recent-title{margin-top:0}.masthead{text-align:right;margin-bottom:2rem;padding-top:1rem}.masthead a{color:#111}.masthead .masthead-title{float:left;margin:0;padding:0}.masthead .masthead-title a{border:0;text-decoration:none}.masthead .masthead-nav{margin-bottom:0;padding-left:0;display:inline-block}.masthead .masthead-nav a{border:0;text-decoration:none}.masthead .masthead-nav a+a{margin-left:.6rem}.footer{text-align:center;margin-bottom:1rem}.footer a[rel=license]:first-child{border:0;margin:0;padding:0;text-decoration:none;display:inline-block}.footer .icon-square{color:#0000}.footer .icon-square:hover{color:#252525}.footer .fa-stack-1x{color:#000}.footer p>span{font-size:110%}.footer p>span a{border:0;padding:2px}.footer p>span i:hover{color:#fff}.footer p p:last-child{margin-bottom:0}.posts{padding-bottom:1rem}.posts .posts-item{margin-bottom:1rem}@media (width>=42em){.posts .posts-item{margin-bottom:.2rem}}.posts a{border:0}.posts time{color:#848484;display:block}@media (width>=42em){.posts time{float:right;margin-top:2px}}.next,.previous{font-size:20px;font-weight:600;transition:transform .3s ease-out}.next{float:right}.next:hover{transform:translate(4px)}.previous{float:left}.previous:hover{transform:translate(-4px)}html,body{margin:0}html{font-family:Lora,"sans-serif";font-size:20px;line-height:1.6}@media (width>=42em){html{font-size:22px}}body{color:#444;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%;background-color:#fff;padding:2rem 1.5rem}a{color:#4d8b00;border-bottom:1px solid #4d8b00;text-decoration:none}a:hover,a:focus{color:#fff;background-color:#4d8b00}a strong{color:inherit}img{border-radius:5px;max-width:100%;margin:0 0 1rem;display:block}table{border-collapse:collapse;border:1px solid #c4c4c4;width:100%;margin-bottom:1rem;font-size:85%}.js-file-line-container td{border:none}td,th{border:1px solid #c4c4c4;padding:.25rem .5rem}th{text-align:left}tbody tr:nth-child(2n) td,tbody tr:nth-child(2n) th{background-color:#fff}tbody tr:nth-child(odd) td,tbody tr:nth-child(odd) th{background-color:#fafafa}</style><style>@font-face{font-family:Lora;font-style:italic;font-weight:400;font-display:swap;src:url(/fonts/0QI8MX1D_JOuMw_hLdO6T2wV9KnW-MoFoq92nA.woff2)format("woff2");unicode-range:U+??,U+131,U+152-153,U+2BB-2BC,U+2C6,U+2DA,U+2DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Lora;font-style:normal;font-weight:400;font-display:swap;src:url(/fonts/0QI6MX1D_JOuGQbT0gvTJPa787weuxJBkq0.woff2)format("woff2");unicode-range:U+??,U+131,U+152-153,U+2BB-2BC,U+2C6,U+2DA,U+2DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Lora;font-style:normal;font-weight:700;font-display:swap;src:url(/fonts/0QI6MX1D_JOuGQbT0gvTJPa787z5vBJBkq0.woff2)format("woff2");unicode-range:U+??,U+131,U+152-153,U+2BB-2BC,U+2C6,U+2DA,U+2DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}</style><body><link href=/style.css rel=stylesheet><style>#mc_embed_signup{background:#fff; clear:left; font:14px Helvetica,Arial,sans-serif; }
	/* MailChimp Form Embed Code - Classic - 12/17/2015 v10.7 */
	#mc_embed_signup form {display:block; position:relative; text-align:left;}
	#mc_embed_signup h2 {font-weight:bold; padding:0; margin:15px 0; font-size:1.4em;}
	#mc_embed_signup input {border: 1px solid #ABB0B2; -webkit-border-radius: 3px; -moz-border-radius: 3px; border-radius: 3px;}
	#mc_embed_signup input[type=checkbox]{-webkit-appearance:checkbox;}
	#mc_embed_signup input[type=radio]{-webkit-appearance:radio;}
	#mc_embed_signup input:focus {border-color:#333;}
	#mc_embed_signup .button {clear:both; background-color: #aaa; border: 0 none; border-radius:4px; transition: all 0.23s ease-in-out 0s; color: #FFFFFF; cursor: pointer; display: inline-block; font-size:15px; font-weight: normal; height: 32px; line-height: 32px; margin: 0 5px 10px 0; padding: 0 22px; text-align: center; text-decoration: none; vertical-align: top; white-space: nowrap; width: auto;}
	#mc_embed_signup .button:hover {background-color:#777;}
	#mc_embed_signup .small-meta {font-size: 11px;}
	#mc_embed_signup .nowrap {white-space:nowrap;}

	#mc_embed_signup .mc-field-group {clear:left; position:relative; width:96%; padding: 0.5%; min-height:50px;}
	#mc_embed_signup .size1of2 {clear:none; float:left; display:inline-block; width:46%; margin-right:4%;}
	* html #mc_embed_signup .size1of2 {margin-right:2%; /* Fix for IE6 double margins. */}
	#mc_embed_signup .mc-field-group label {display:block; margin-bottom:3px;}
	#mc_embed_signup .mc-field-group input {display:inline; width:100%; padding:8px 0; text-indent:2%;}
	#mc_embed_signup .mc-field-group select {display:inline-block; width:99%; padding:5px 0; margin-bottom:2px;}

	#mc_embed_signup .datefield, #mc_embed_signup .phonefield-us{padding:5px 0;}
	#mc_embed_signup .datefield input, #mc_embed_signup .phonefield-us input{display:inline; width:60px; margin:0 2px; letter-spacing:1px; text-align:center; padding:5px 0 2px 0;}
	#mc_embed_signup .phonefield-us .phonearea input, #mc_embed_signup .phonefield-us .phonedetail1 input{width:40px;}
	#mc_embed_signup .datefield .monthfield input, #mc_embed_signup .datefield .dayfield input{width:30px;}
	#mc_embed_signup .datefield label, #mc_embed_signup .phonefield-us label{display:none;}

	#mc_embed_signup .asterisk {color:#e85c41; font-size:150%; font-weight:normal; position:relative; top:5px;}     
	#mc_embed_signup .mce-submit {padding: 0.5%;}
	#mc_embed_signup_scroll {display: flex; justify-items; space-around;}

	#mc_embed_signup .mc-field-group.input-group ul {margin:0; padding:5px 0; list-style:none;}
	#mc_embed_signup .mc-field-group.input-group ul li {display:block; padding:3px 0; margin:0;}
	#mc_embed_signup .mc-field-group.input-group label {display:inline;}
	#mc_embed_signup .mc-field-group.input-group input {display:inline; width:auto; border:none;}

	#mc_embed_signup div#mce-responses {clear: both;}
	#mc_embed_signup div.response {margin:1em 0; padding:1em .5em .5em 0; font-weight:bold; float:left; top:-1.5em; z-index:1; width:80%;}
	#mc_embed_signup #mce-error-response {display:none;}
	#mc_embed_signup #mce-success-response {color:#529214; display:none;}
	#mc_embed_signup label.error {display:block; float:none; width:auto; margin-left:1.05em; text-align:left; padding:.5em 0;}

	#mc-embedded-subscribe {clear:both; width:auto; display:block; margin:1em 0 1em 5%;}
	#mc_embed_signup #num-subscribers {font-size:1.1em;}
	#mc_embed_signup #num-subscribers span {padding:.5em; border:1px solid #ccc; margin-right:.5em; font-weight:bold;}

	#mc_embed_signup #mc-embedded-subscribe-form div.mce_inline_error {display:inline-block; margin:2px 0 1em 0; padding:5px 10px; background-color:rgba(255,255,255,0.85); -webkit-border-radius: 3px; -moz-border-radius: 3px; border-radius: 3px; font-size:14px; font-weight:normal; z-index:1; color:#e85c41;}
	#mc_embed_signup #mc-embedded-subscribe-form input.mce_inline_error {border:2px solid #e85c41;}
	/* Add your own Mailchimp form style overrides in your site stylesheet or in this style block.
	   We recommend moving this block and the preceding CSS link to the HEAD of your HTML file. */</style><header class=masthead><h3 class=masthead-title><a href=/>Shaleen Jain</a></h3><nav class=masthead-nav><a class=nav-item href=/blog>Blog</a></nav></header><main class=content><article class=post><header class=post-header><time class=post-date datetime=2018-07-08> 08 Jul 2018 </time><small> · <span title="Estimated read time" class=reading-time> 1 min read </span> </small><h1 class=post-title>Continuous Marketing - Exploiting Insecure REST API's</h1></header><p>After I finished refactoring my android app to use a 3rd-party public API for the user data, I needed a way to quickly promote my application to users.<p>The API I used is inherently insecure with virtually no standard REST API security in place and designed with a top-down approach to suit their own mobile app. Their whole premise being to secure the mobile app with 2FA and having an API that’s quite literally a bunch of wrapper functions around database queries exposed as endpoints.</p><span id=continue-reading></span><p>All their CRUD operations are implemented as GET methods (so much for being idempotent) and their idea of security is just using a users mobile number to get their unique user ID that they call “encrypturl”. 2FA is just two separate endpoints added to send and confirm the OTP send to the user’s mobile, which again just advance the mobile flow and are completely orthogonal to the API design.<p>So I exploited their API yet again to get the email ids of every user they have in their system by trying every 10 digit combination with the 10th digit always being either 7, 8 or 9 (majority of Indian mobile phone numbers) until I get a hit and receive the users unique id required to access the rest of the API endpoints.<p>Using the user-id I get their email-ID from my own API that I built around their API to have better object models. Once I have the email-id I proceed to send them an email promoting my application designed using the Campaign and Template design editor of <a rel="noopener nofollow noreferrer" href=https://sendgrid.com target=_blank>Sendgrid</a> with their awesome developer API and <a rel="noopener nofollow noreferrer" href=https://github.com/sendgrid/sendgrid-python target=_blank>python</a> library that made programmatically sending emails a lot more easier.<p>So with the brute force method I found a new email-id every 5~6 seconds that translates into a new promotional email sent with every new email discovered. And my “Continuous Marketing” is still running with over 15000 emails sent already.<p>If you as well every find and are willing to exploit an insecure API for at least marketing gains perhaps this python script will make that a lot more easy for you.<div><script src=https://gist.github.com/shalzz/ff60ae09162112db067b9463c76469e0.js></script></div></article><div>Liked this article? Share this with others</div><p>Got any questions or comments? Drop me a message on <a href=https://twitter.com/shalzzj rel=nofollow>Twitter @shalzzj</a><div>Sign up for my newsletter to be the first to know about a new post <div id=mc_embed_signup><form action="https://shaleenjain.us1.list-manage.com/subscribe/post?u=1eaa5ecf0b59e6a364a3c9c1a&id=dbd95a64e5" class=validate id=mc-embedded-subscribe-form method=post name=mc-embedded-subscribe-form novalidate target=_blank><div id=mc_embed_signup_scroll><div class=mc-field-group><input class="required email plausible-event-name=EmailInput" placeholder="Email Address" id=mce-EMAIL name=EMAIL type=email></div><div aria-hidden=true style=position:absolute;left:-5000px><input name=b_1eaa5ecf0b59e6a364a3c9c1a_dbd95a64e5 tabindex=-1></div><div class=mce-submit><input class="button plausible-event-name=Subscribe" id=mc-embedded-subscribe name=subscribe type=submit value=Subscribe></div></div><div id=mce-responses><div class=response id=mce-error-response></div><div class=response id=mce-success-response></div></div></form></div><script defer src=//s3.amazonaws.com/downloads.mailchimp.com/js/mc-validate.js></script><script>(function($) {window.fnames = new Array(); window.ftypes = new Array();fnames[0]='EMAIL';ftypes[0]='email';fnames[1]='FNAME';ftypes[1]='text';fnames[2]='LNAME';ftypes[2]='text';fnames[3]='ADDRESS';ftypes[3]='address';fnames[4]='PHONE';ftypes[4]='phone';fnames[5]='BIRTHDAY';ftypes[5]='birthday';}(jQuery));var $mcj = jQuery.noConflict(true);</script></div></main><footer class=footer><p><small> This work is licensed under the <a href=http://creativecommons.org/licenses/by-sa/4.0/ rel=license> CC BY-SA 4.0</a> license. <br> <a href=/atom.xml>RSS Feed</a> — <a href=/donate>Donate</a> </small></footer><script data-domain=shaleenjain.com defer src=https://plausible.8bitlabs.dev/js/script.outbound-links.tagged-events.js></script>